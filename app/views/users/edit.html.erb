<h1>Editing user</h1>

<%= semantic_form_for(@user) do |f| %>
  <%= f.error_messages %>
  <%= f.inputs :title => "Account information" do %>
    <%= f.input :username %>
    <%= f.input :email %>
    <%= f.input :password %>
    <%= f.input :password_confirmation %>
  <% end %>
  <%= f.inputs :title => "Profile information" do %>
      <%= f.input :first_name %>
      <%= f.input :last_name %>
      <%= f.input :location %>
  <% end %>
  <%= f.inputs :title => "My games" do %>
    <%= f.input :games_tokens, :label => "Favorite games", :input_html => { "data-pre" => @user.games.map(&:attributes).to_json } %>
  <% end %>
  
  <%= f.buttons %>
<% end %>

<%= link_to 'Show', @user %> |
<%= link_to 'Back', users_path %>


<script type="text/javascript">
  $(function () {  
    $('#user_games_tokens').tokenInput('/games.json', { crossDomain: false, theme: 'facebook' });
  });
</script>